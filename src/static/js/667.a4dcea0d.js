"use strict";(self["webpackChunkdockerforge_web_ui"]=self["webpackChunkdockerforge_web_ui"]||[]).push([[667],{9667:function(e,s,r){r.r(s),r.d(s,{default:function(){return c}});var a=r(641),o=r(33),l=r(3751);function d(e,s,r,d,t,n){const u=(0,a.g2)("v-toolbar-title"),i=(0,a.g2)("v-spacer"),c=(0,a.g2)("v-toolbar"),w=(0,a.g2)("v-alert"),f=(0,a.g2)("v-text-field"),h=(0,a.g2)("v-form"),g=(0,a.g2)("v-card-text"),m=(0,a.g2)("v-btn"),p=(0,a.g2)("v-card-actions"),b=(0,a.g2)("v-card"),P=(0,a.g2)("v-col"),k=(0,a.g2)("v-row"),v=(0,a.g2)("v-container");return(0,a.uX)(),(0,a.Wv)(v,{class:"fill-height",fluid:""},{default:(0,a.k6)((()=>[(0,a.bF)(k,{align:"center",justify:"center"},{default:(0,a.k6)((()=>[(0,a.bF)(P,{cols:"12",sm:"8",md:"6",lg:"4"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{class:"elevation-12"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{color:"primary",dark:"",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(u,null,{default:(0,a.k6)((()=>s[7]||(s[7]=[(0,a.eW)("Change Password")]))),_:1}),(0,a.bF)(i)])),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)((()=>[t.error?((0,a.uX)(),(0,a.Wv)(w,{key:0,type:"error",dismissible:"",onClick:s[0]||(s[0]=e=>t.error=null)},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(t.error),1)])),_:1})):(0,a.Q3)("",!0),t.success?((0,a.uX)(),(0,a.Wv)(w,{key:1,type:"success",dismissible:"",onClick:s[1]||(s[1]=e=>t.success=null)},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(t.success),1)])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(h,{ref:"form",modelValue:t.valid,"onUpdate:modelValue":s[5]||(s[5]=e=>t.valid=e),"lazy-validation":"",onSubmit:(0,l.D$)(n.changePassword,["prevent"])},{default:(0,a.k6)((()=>[(0,a.bF)(f,{modelValue:t.currentPassword,"onUpdate:modelValue":s[2]||(s[2]=e=>t.currentPassword=e),rules:t.currentPasswordRules,label:"Current Password","prepend-icon":"mdi-lock-outline",type:"password",required:"",disabled:t.loading},null,8,["modelValue","rules","disabled"]),(0,a.bF)(f,{modelValue:t.newPassword,"onUpdate:modelValue":s[3]||(s[3]=e=>t.newPassword=e),rules:t.newPasswordRules,label:"New Password","prepend-icon":"mdi-lock",type:"password",required:"",disabled:t.loading},null,8,["modelValue","rules","disabled"]),(0,a.bF)(f,{modelValue:t.confirmPassword,"onUpdate:modelValue":s[4]||(s[4]=e=>t.confirmPassword=e),rules:t.confirmPasswordRules,label:"Confirm New Password","prepend-icon":"mdi-lock-check",type:"password",required:"",disabled:t.loading,onKeyup:(0,l.jR)(n.changePassword,["enter"])},null,8,["modelValue","rules","disabled","onKeyup"])])),_:1},8,["modelValue","onSubmit"])])),_:1}),(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(i),t.forced?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(m,{key:0,color:"secondary",disabled:t.loading,onClick:s[6]||(s[6]=s=>e.$router.push("/"))},{default:(0,a.k6)((()=>s[8]||(s[8]=[(0,a.eW)(" Cancel ")]))),_:1},8,["disabled"])),(0,a.bF)(m,{color:"primary",disabled:!t.valid||t.loading,loading:t.loading,onClick:n.changePassword},{default:(0,a.k6)((()=>s[9]||(s[9]=[(0,a.eW)(" Change Password ")]))),_:1},8,["disabled","loading","onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var t=r(4335),n={name:"PasswordChange",data(){return{valid:!0,currentPassword:"",currentPasswordRules:[e=>!!e||"Current password is required"],newPassword:"",newPasswordRules:[e=>!!e||"New password is required",e=>e&&e.length>=8||"Password must be at least 8 characters",e=>e&&e!==this.currentPassword||"New password must be different from current password"],confirmPassword:"",confirmPasswordRules:[e=>!!e||"Please confirm your password",e=>e===this.newPassword||"Passwords do not match"],error:null,success:null,loading:!1,forced:!1}},created(){this.forced="true"===this.$route.query.forced},methods:{async changePassword(){if(this.$refs.form.validate())try{this.loading=!0,this.error=null,this.success=null,await t.A.post("/api/auth/change-password",{current_password:this.currentPassword,new_password:this.newPassword},{headers:{Authorization:`Bearer ${this.$store.state.auth.token}`}}),this.$store.commit("auth/SET_PASSWORD_CHANGED"),this.success="Password successfully changed!",setTimeout((()=>{this.$router.push("/")}),2e3)}catch(e){console.error("Password change error:",e),this.error=e.response?.data?.detail||"Failed to change password. Please try again."}finally{this.loading=!1}}}},u=r(6262);const i=(0,u.A)(n,[["render",d]]);var c=i}}]);
//# sourceMappingURL=667.a4dcea0d.js.map