"use strict";(self["webpackChunkdockerforge_web_ui"]=self["webpackChunkdockerforge_web_ui"]||[]).push([[869],{5869:function(e,a,r){r.r(a),r.d(a,{default:function(){return c}});var l=r(641),o=r(33),s=r(3751);function d(e,a,r,d,n,i){const t=(0,l.g2)("v-toolbar-title"),u=(0,l.g2)("v-spacer"),c=(0,l.g2)("v-toolbar"),g=(0,l.g2)("v-alert"),p=(0,l.g2)("v-text-field"),m=(0,l.g2)("v-form"),f=(0,l.g2)("v-card-text"),b=(0,l.g2)("v-btn"),h=(0,l.g2)("v-card-actions"),k=(0,l.g2)("v-card"),v=(0,l.g2)("v-col"),_=(0,l.g2)("v-row"),w=(0,l.g2)("v-container");return(0,l.uX)(),(0,l.Wv)(w,{class:"fill-height",fluid:""},{default:(0,l.k6)((()=>[(0,l.bF)(_,{align:"center",justify:"center"},{default:(0,l.k6)((()=>[(0,l.bF)(v,{cols:"12",sm:"8",md:"6",lg:"4"},{default:(0,l.k6)((()=>[(0,l.bF)(k,{class:"elevation-12"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{color:"primary",dark:"",flat:""},{default:(0,l.k6)((()=>[(0,l.bF)(t,null,{default:(0,l.k6)((()=>a[4]||(a[4]=[(0,l.eW)("DockerForge Login")]))),_:1}),(0,l.bF)(u)])),_:1}),(0,l.bF)(f,null,{default:(0,l.k6)((()=>[n.error?((0,l.uX)(),(0,l.Wv)(g,{key:0,type:"error",dismissible:"",onClick:a[0]||(a[0]=e=>n.error=null)},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(n.error),1)])),_:1})):(0,l.Q3)("",!0),(0,l.bF)(m,{ref:"form",modelValue:n.valid,"onUpdate:modelValue":a[3]||(a[3]=e=>n.valid=e),"lazy-validation":"",onSubmit:(0,s.D$)(i.login,["prevent"])},{default:(0,l.k6)((()=>[(0,l.bF)(p,{modelValue:n.username,"onUpdate:modelValue":a[1]||(a[1]=e=>n.username=e),rules:n.usernameRules,label:"Username","prepend-icon":"mdi-account",required:"",disabled:n.loading},null,8,["modelValue","rules","disabled"]),(0,l.bF)(p,{modelValue:n.password,"onUpdate:modelValue":a[2]||(a[2]=e=>n.password=e),rules:n.passwordRules,label:"Password","prepend-icon":"mdi-lock",type:"password",required:"",disabled:n.loading,onKeyup:(0,s.jR)(i.login,["enter"])},null,8,["modelValue","rules","disabled","onKeyup"])])),_:1},8,["modelValue","onSubmit"])])),_:1}),(0,l.bF)(h,null,{default:(0,l.k6)((()=>[(0,l.bF)(u),(0,l.bF)(b,{color:"primary",disabled:!n.valid||n.loading,loading:n.loading,onClick:i.login},{default:(0,l.k6)((()=>a[5]||(a[5]=[(0,l.eW)(" Login ")]))),_:1},8,["disabled","loading","onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var n=r(4335),i={name:"Login",data(){return{valid:!0,username:"",usernameRules:[e=>!!e||"Username is required"],password:"",passwordRules:[e=>!!e||"Password is required"],error:null,loading:!1}},methods:{async login(){if(this.$refs.form.validate())try{this.loading=!0,this.error=null;const e=new FormData;e.append("username",this.username),e.append("password",this.password);const a=await n.A.post("/api/auth/token",e);this.$store.dispatch("auth/login",{token:a.data.access_token,user:{username:this.username,password_change_required:a.data.password_change_required}}),a.data.password_change_required?this.$router.push({path:"/change-password",query:{forced:"true"}}):this.$router.push("/")}catch(e){console.error("Login error:",e),this.error=e.response?.data?.detail||"Login failed. Please check your credentials."}finally{this.loading=!1}}}},t=r(6262);const u=(0,t.A)(i,[["render",d]]);var c=u}}]);
//# sourceMappingURL=869.e847f762.js.map