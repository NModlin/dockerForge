"use strict";(self["webpackChunkdockerforge_web_ui"]=self["webpackChunkdockerforge_web_ui"]||[]).push([[0],{5e3:function(e,l,a){a.r(l),a.d(l,{default:function(){return k}});var t=a(641),i=a(33);const s={class:"image-list"},o={class:"mt-2"},d={key:0};function n(e,l,a,n,r,c){const u=(0,t.g2)("v-spacer"),m=(0,t.g2)("v-text-field"),g=(0,t.g2)("v-icon"),h=(0,t.g2)("v-btn"),k=(0,t.g2)("v-card-title"),f=(0,t.g2)("v-chip"),b=(0,t.g2)("v-data-table"),p=(0,t.g2)("v-card"),I=(0,t.g2)("v-col"),F=(0,t.g2)("v-row"),v=(0,t.g2)("v-container"),_=(0,t.g2)("v-form"),D=(0,t.g2)("v-card-text"),w=(0,t.g2)("v-card-actions"),y=(0,t.g2)("v-dialog"),C=(0,t.g2)("v-checkbox"),V=(0,t.g2)("v-snackbar");return(0,t.uX)(),(0,t.CE)("div",s,[(0,t.bF)(v,{fluid:""},{default:(0,t.k6)((()=>[(0,t.bF)(F,null,{default:(0,t.k6)((()=>[(0,t.bF)(I,{cols:"12"},{default:(0,t.k6)((()=>[(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(k,null,{default:(0,t.k6)((()=>[l[11]||(l[11]=(0,t.eW)(" Docker Images ")),(0,t.bF)(u),(0,t.bF)(m,{modelValue:r.search,"onUpdate:modelValue":l[0]||(l[0]=e=>r.search=e),"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",class:"mx-4"},null,8,["modelValue"]),(0,t.bF)(h,{color:"primary",onClick:c.openPullDialog},{default:(0,t.k6)((()=>[(0,t.bF)(g,{left:""},{default:(0,t.k6)((()=>l[9]||(l[9]=[(0,t.eW)("mdi-cloud-download")]))),_:1}),l[10]||(l[10]=(0,t.eW)(" Pull Image "))])),_:1},8,["onClick"])])),_:1}),(0,t.bF)(b,{headers:r.headers,items:e.images,search:r.search,loading:r.loading,"items-per-page":10,"footer-props":{"items-per-page-options":[5,10,15,20,50]},class:"elevation-1"},{"item.tags":(0,t.k6)((({item:e})=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.tags,(e=>((0,t.uX)(),(0,t.Wv)(f,{key:e,class:"ma-1",small:"",color:"primary","text-color":"white"},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e),1)])),_:2},1024)))),128))])),"item.size":(0,t.k6)((({item:e})=>[(0,t.eW)((0,i.v_)(c.formatSize(e.size)),1)])),"item.created_at":(0,t.k6)((({item:e})=>[(0,t.eW)((0,i.v_)(c.formatDate(e.created_at)),1)])),"item.actions":(0,t.k6)((({item:e})=>[(0,t.bF)(h,{icon:"",small:"",onClick:l=>c.viewImageDetails(e)},{default:(0,t.k6)((()=>[(0,t.bF)(g,{small:""},{default:(0,t.k6)((()=>l[12]||(l[12]=[(0,t.eW)("mdi-eye")]))),_:1})])),_:2},1032,["onClick"]),(0,t.bF)(h,{icon:"",small:"",onClick:l=>c.scanImage(e)},{default:(0,t.k6)((()=>[(0,t.bF)(g,{small:""},{default:(0,t.k6)((()=>l[13]||(l[13]=[(0,t.eW)("mdi-shield-search")]))),_:1})])),_:2},1032,["onClick"]),(0,t.bF)(h,{icon:"",small:"",onClick:l=>c.confirmDeleteImage(e)},{default:(0,t.k6)((()=>[(0,t.bF)(g,{small:"",color:"error"},{default:(0,t.k6)((()=>l[14]||(l[14]=[(0,t.eW)("mdi-delete")]))),_:1})])),_:2},1032,["onClick"])])),_:1},8,["headers","items","search","loading"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.bF)(y,{modelValue:r.pullDialog,"onUpdate:modelValue":l[4]||(l[4]=e=>r.pullDialog=e),"max-width":"500px"},{default:(0,t.k6)((()=>[(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(k,null,{default:(0,t.k6)((()=>l[15]||(l[15]=[(0,t.eW)("Pull Docker Image")]))),_:1}),(0,t.bF)(D,null,{default:(0,t.k6)((()=>[(0,t.bF)(_,{ref:"pullForm",modelValue:r.validPullForm,"onUpdate:modelValue":l[3]||(l[3]=e=>r.validPullForm=e),"lazy-validation":""},{default:(0,t.k6)((()=>[(0,t.bF)(m,{modelValue:r.newImage.name,"onUpdate:modelValue":l[1]||(l[1]=e=>r.newImage.name=e),label:"Image Name",rules:[e=>!!e||"Image name is required"],required:""},null,8,["modelValue","rules"]),(0,t.bF)(m,{modelValue:r.newImage.tag,"onUpdate:modelValue":l[2]||(l[2]=e=>r.newImage.tag=e),label:"Tag",hint:"Leave empty for 'latest'"},null,8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(w,null,{default:(0,t.k6)((()=>[(0,t.bF)(u),(0,t.bF)(h,{color:"blue darken-1",text:"",onClick:c.closePullDialog},{default:(0,t.k6)((()=>l[16]||(l[16]=[(0,t.eW)("Cancel")]))),_:1},8,["onClick"]),(0,t.bF)(h,{color:"blue darken-1",text:"",onClick:c.pullImage,loading:r.pulling,disabled:!r.validPullForm||r.pulling},{default:(0,t.k6)((()=>l[17]||(l[17]=[(0,t.eW)(" Pull ")]))),_:1},8,["onClick","loading","disabled"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)(y,{modelValue:r.deleteDialog,"onUpdate:modelValue":l[6]||(l[6]=e=>r.deleteDialog=e),"max-width":"500px"},{default:(0,t.k6)((()=>[(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(k,null,{default:(0,t.k6)((()=>l[18]||(l[18]=[(0,t.eW)("Delete Image")]))),_:1}),(0,t.bF)(D,null,{default:(0,t.k6)((()=>[l[21]||(l[21]=(0,t.eW)(" Are you sure you want to delete this image? ")),(0,t.Lk)("div",o,[l[19]||(l[19]=(0,t.Lk)("strong",null,"ID:",-1)),(0,t.eW)(" "+(0,i.v_)(r.selectedImage?.id),1)]),r.selectedImage?.tags&&r.selectedImage.tags.length>0?((0,t.uX)(),(0,t.CE)("div",d,[l[20]||(l[20]=(0,t.Lk)("strong",null,"Tags:",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.selectedImage.tags,(e=>((0,t.uX)(),(0,t.Wv)(f,{key:e,class:"ma-1",small:"",color:"primary","text-color":"white"},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e),1)])),_:2},1024)))),128))])):(0,t.Q3)("",!0),(0,t.bF)(C,{modelValue:r.forceDelete,"onUpdate:modelValue":l[5]||(l[5]=e=>r.forceDelete=e),label:"Force delete (remove even if used by containers)",class:"mt-4"},null,8,["modelValue"])])),_:1}),(0,t.bF)(w,null,{default:(0,t.k6)((()=>[(0,t.bF)(u),(0,t.bF)(h,{color:"blue darken-1",text:"",onClick:c.closeDeleteDialog},{default:(0,t.k6)((()=>l[22]||(l[22]=[(0,t.eW)("Cancel")]))),_:1},8,["onClick"]),(0,t.bF)(h,{color:"red darken-1",text:"",onClick:c.deleteImage,loading:r.deleting,disabled:r.deleting},{default:(0,t.k6)((()=>l[23]||(l[23]=[(0,t.eW)(" Delete ")]))),_:1},8,["onClick","loading","disabled"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)(V,{modelValue:r.snackbar,"onUpdate:modelValue":l[8]||(l[8]=e=>r.snackbar=e),color:r.snackbarColor,timeout:3e3},{action:(0,t.k6)((({attrs:e})=>[(0,t.bF)(h,(0,t.v6)({text:""},e,{onClick:l[7]||(l[7]=e=>r.snackbar=!1)}),{default:(0,t.k6)((()=>l[24]||(l[24]=[(0,t.eW)("Close")]))),_:2},1040)])),default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(r.snackbarText)+" ",1)])),_:1},8,["modelValue","color"])])}var r=a(2977),c=a(9061),u=a(5794),m={name:"ImageList",data(){return{search:"",headers:[{text:"ID",value:"short_id"},{text:"Tags",value:"tags"},{text:"Size",value:"size"},{text:"Created",value:"created_at"},{text:"Actions",value:"actions",sortable:!1}],loading:!1,pullDialog:!1,deleteDialog:!1,validPullForm:!0,newImage:{name:"",tag:""},selectedImage:null,pulling:!1,deleting:!1,forceDelete:!1,snackbar:!1,snackbarText:"",snackbarColor:"success"}},computed:{...(0,r.aH)("images",["images"])},created(){this.fetchImages()},methods:{...(0,r.i0)("images",["getImages","pullImage","removeImage","scanImageVulnerabilities"]),async fetchImages(){this.loading=!0;try{await this.getImages()}catch(e){this.showError("Failed to fetch images: "+e.message)}finally{this.loading=!1}},formatSize(e){if(!e)return"Unknown";const l=["B","KB","MB","GB","TB"];let a=e,t=0;while(a>=1024&&t<l.length-1)a/=1024,t++;return`${a.toFixed(2)} ${l[t]}`},formatDate(e){if(!e)return"Unknown";try{return(0,c.A)((0,u.A)(e),"MMM d, yyyy HH:mm")}catch(l){return e}},openPullDialog(){this.pullDialog=!0,this.newImage={name:"",tag:""},this.$refs.pullForm&&this.$refs.pullForm.resetValidation()},closePullDialog(){this.pullDialog=!1},async pullImage(){if(this.$refs.pullForm.validate()){this.pulling=!0;try{await this.pullImage({name:this.newImage.name,tag:this.newImage.tag||"latest"}),this.closePullDialog(),this.showSuccess("Image pulled successfully"),this.fetchImages()}catch(e){this.showError("Failed to pull image: "+e.message)}finally{this.pulling=!1}}},confirmDeleteImage(e){this.selectedImage=e,this.deleteDialog=!0,this.forceDelete=!1},closeDeleteDialog(){this.deleteDialog=!1,this.selectedImage=null},async deleteImage(){if(this.selectedImage){this.deleting=!0;try{await this.removeImage({id:this.selectedImage.id,force:this.forceDelete}),this.closeDeleteDialog(),this.showSuccess("Image deleted successfully"),this.fetchImages()}catch(e){this.showError("Failed to delete image: "+e.message)}finally{this.deleting=!1}}},viewImageDetails(e){this.$router.push({name:"ImageDetail",params:{id:e.id}})},async scanImage(e){try{await this.scanImageVulnerabilities(e.id),this.showSuccess("Security scan initiated"),this.$router.push({name:"ImageSecurity",params:{id:e.id}})}catch(l){this.showError("Failed to scan image: "+l.message)}},showSuccess(e){this.snackbarText=e,this.snackbarColor="success",this.snackbar=!0},showError(e){this.snackbarText=e,this.snackbarColor="error",this.snackbar=!0}}},g=a(6262);const h=(0,g.A)(m,[["render",n],["__scopeId","data-v-164a36f9"]]);var k=h}}]);
//# sourceMappingURL=0.abd1d798.js.map